<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>S·∫£n Ph·∫©m - B·∫øp M·∫ßm</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="logo.jpg" >
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <style>
    .disabled-product {
      opacity: 0.5;
      position: relative;
    }

    .disabled-product::after {
      content: "H·∫øt h√†ng";
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: red;
      font-weight: bold;
      font-size: 1.2em;
      background: rgba(255, 255, 255, 0.8);
      padding: 5px 10px;
      border-radius: 5px;
    }

    .add-to-cart.disabled {
      pointer-events: none;
      background: #ccc !important;
      cursor: not-allowed;
    }
  </style>
  <body>
    <header class="header">
      <div class="logo">
        <img src="logo.jpg" alt="logo" class="logo-img" />
        <p class="logo-text">B·∫æP M·∫¶M</p>
      </div>

      <div class="menu">
          <nav class="nav">
            <ul class="nav-links">
              <li><a href="index.html">Trang ch·ªß</a></li>
              <li><a href="about.html">Gi·ªõi thi·ªáu</a></li>
              <li><a href="products.html">S·∫£n ph·∫©m</a></li>
              <div class="cart-container">
                <a href="#" id="cart-button" title="Xem gi·ªè h√†ng">
                  üõí <span class="cart-count" id="cart-count">0</span>
                </a>
                <div class="cart-dropdown" id="cart-dropdown">
                  <h3>Gi·ªè h√†ng</h3>
                  <ul id="cart-items">
                    <li>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</li>
                  </ul>
                  <div class="cart-total">
                    <span>T·ªïng: </span><span id="cart-total">0</span> ƒë
                  </div>
                  <a href="checkout.html" class="btn">Thanh to√°n</a>
                </div>
              </div>
              <li id="user-menu">
                <a href="login.html" title="ƒêƒÉng nh·∫≠p">
                  <i
                    class="fas fa-user-circle"
                    style="font-size: 1.5rem"
                    id="user-icon"
                  ></i>
                </a>
              </li>
            </ul>
          </nav>
      </div>
    </header>

    <main>
      <section class="product">
        <h2>T·∫•t c·∫£ s·∫£n ph·∫©m</h2>
        <div class="product-grid">
          <div class="product-item">
            <img src="nuoccam.jpg" alt="N∆∞·ªõc cam" />
            <h3>N∆∞·ªõc cam</h3>
            <p>N∆∞·ªõc cam t·ª± nhi√™n, gi√†u vitamin C v√† d∆∞·ª°ng ch·∫•t.</p>
            <span class="product-price">45.000ƒë</span>
            <a
              href="#"
              class="btn add-to-cart"
              data-name="N∆∞·ªõc cam"
              data-price="45000"
              >Th√™m v√†o gi·ªè h√†ng</a
            >
          </div>
          <div class="product-item">
            <img src="sinhtobo.jpg" alt="Sinh t·ªë b∆°" />
            <h3>Sinh t·ªë b∆°</h3>
            <p>B∆° t∆∞∆°i m√°t, gi√†u ch·∫•t b√©o t·ªët v√† vitamin.</p>
            <span class="product-price">65.000ƒë</span>
            <a
              href="#"
              class="btn add-to-cart"
              data-name="Sinh t·ªë b∆°"
              data-price="65000"
              >Th√™m v√†o gi·ªè h√†ng</a
            >
          </div>
          <div class="product-item">
            <img src="nuocle.jpg" alt="N∆∞·ªõc l√™" />
            <h3>N∆∞·ªõc l√™</h3>
            <p>N∆∞·ªõc l√™ t∆∞∆°i m√°t, b·ªï d∆∞·ª°ng, gi√∫p gi·∫£i kh√°t hi·ªáu qu·∫£.</p>
            <span class="product-price">45.000ƒë</span>
            <a
              href="#"
              class="btn add-to-cart"
              data-name="N∆∞·ªõc l√™"
              data-price="45000"
              >Th√™m v√†o gi·ªè h√†ng</a
            >
          </div>
          <div class="product-item">
            <img src="nuocdua.jpg" alt="N∆∞·ªõc d·ª©a" />
            <h3>N∆∞·ªõc d·ª©a</h3>
            <p>N∆∞·ªõc d·ª©a t∆∞∆°i m√°t, b·ªï d∆∞·ª°ng, gi√∫p gi·∫£i kh√°t hi·ªáu qu·∫£.</p>
            <span class="product-price">50.000ƒë</span>
            <a
              href="#"
              class="btn add-to-cart"
              data-name="N∆∞·ªõc d·ª©a"
              data-price="50000"
              >Th√™m v√†o gi·ªè h√†ng</a
            >
          </div>
          <div class="product-item">
            <img src="suaoccho.jpg" alt="S·ªØa √≥c ch√≥" />
            <h3>S·ªØa √≥c ch√≥</h3>
            <p>
              √ìc ch√≥ nguy√™n ch·∫•t, gi√∫p ph√°t tri·ªÉn tr√≠ n√£o v√† tim m·∫°ch kh·ªèe m·∫°nh.
            </p>
            <span class="product-price">45.000ƒë</span>
            <a
              href="#"
              class="btn add-to-cart"
              data-name="S·ªØa √≥c ch√≥"
              data-price="45000"
              >Th√™m v√†o gi·ªè h√†ng</a
            >
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-about">
          <h3>T∆∞∆°i T·ª´ H·∫°t L√†nh T·ª´ T√¢m</h3>
          <p>
            H∆∞∆°ng v·ªã t·ª± nhi√™n, an to√†n tuy·ªát ƒë·ªëi, mang l·∫°i s·ª©c kh·ªèe v√†ng cho c·∫£
            gia ƒë√¨nh b·∫°n!
          </p>
        </div>
        <div class="footer-links">
          <h4>Li√™n k·∫øt nhanh</h4>
          <ul>
            <li><a href="index.html">Trang Ch·ªß</a></li>
            <li><a href="products.html">S·∫£n Ph·∫©m</a></li>
            <li><a href="about.html">Gi·ªõi Thi·ªáu</a></li>
          </ul>
        </div>
        <div class="footer-contact">
          <h4>Li√™n h·ªá</h4>
          <p>ƒêi·ªán tho·∫°i: <a href="tel:+84945079155">0945 079 155</a></p>
          <div class="social-icons">
            <a href="https://www.facebook.com/bep.mam.2025?locale=vi_VN"
              ><img src="logofacebook.png" alt="Facebook"
            /></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>¬© 2025 N∆∞·ªõc t·ª´ thi√™n nhi√™n t∆∞∆°i m√°t - All Rights Reserved</p>
      </div>
    </footer>

    <script>
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      function updateCartDisplay() {
        const cartItems = document.getElementById("cart-items");
        const cartCount = document.getElementById("cart-count");
        const cartTotal = document.getElementById("cart-total");

        if (!cartItems || !cartCount || !cartTotal) return;

        cartItems.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
          cartItems.innerHTML = "<li>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</li>";
        } else {
          cart.forEach((item, index) => {
            total += item.price * item.quantity;
            const li = document.createElement("li");
            li.innerHTML = `
            ${item.name} - ${item.price.toLocaleString()} ƒë
            <div style="display:inline-block;margin-left:10px;">
              <button class="decrease" data-index="${index}">-</button>
              <span style="margin:0 5px">${item.quantity}</span>
              <button class="increase" data-index="${index}">+</button>
            </div>
          `;
            cartItems.appendChild(li);
          });
        }

        cartCount.textContent = cart.reduce(
          (sum, item) => sum + item.quantity,
          0
        );
        cartTotal.textContent = total.toLocaleString();
      }

      // Th√™m v√†o gi·ªè h√†ng
      document.querySelectorAll(".add-to-cart").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          const name = btn.getAttribute("data-name");
          const price = parseInt(btn.getAttribute("data-price"));
          const existing = cart.find((item) => item.name === name);
          if (existing) {
            existing.quantity += 1;
          } else {
            cart.push({ name, price, quantity: 1 });
          }
          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartDisplay();
        });
      });

      // N√∫t +/- trong gi·ªè h√†ng
      document.getElementById("cart-items").addEventListener("click", (e) => {
        const index = e.target.dataset.index;
        if (e.target.classList.contains("decrease")) {
          if (cart[index].quantity > 1) {
            cart[index].quantity -= 1;
          } else {
            cart.splice(index, 1);
          }
        } else if (e.target.classList.contains("increase")) {
          cart[index].quantity += 1;
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
      });

      // Toggle dropdown
      document.getElementById("cart-button").addEventListener("click", (e) => {
        e.preventDefault();
        document.getElementById("cart-dropdown").classList.toggle("active");
      });

      updateCartDisplay();

      const productState = JSON.parse(localStorage.getItem("products")) || {};

      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".product-item").forEach((item) => {
          const name = item.querySelector("h3").textContent.trim();
          const code = Object.keys(productState).find(
            (k) => productState[k].name === name
          );
          const state = code ? productState[code].active : true;

          if (!state) {
            item.classList.add("disabled-product");
            item.querySelector(".add-to-cart").textContent = "H·∫øt h√†ng";
            item.querySelector(".add-to-cart").classList.add("disabled");
          }
        });

        // Ch·∫∑n th√™m v√†o gi·ªè n·∫øu b·ªã t·∫Øt
        document.querySelectorAll(".add-to-cart").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            if (btn.classList.contains("disabled")) {
              e.preventDefault();
              alert("S·∫£n ph·∫©m n√†y hi·ªán ƒëang h·∫øt h√†ng.");
            }
          });
        });
      });
    </script>

    <script src="script.js"></script>
    <script src="cart.js"></script>
  </body>
</html>
